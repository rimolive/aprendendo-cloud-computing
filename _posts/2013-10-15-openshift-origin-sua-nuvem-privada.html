---
layout: post
title: 'Openshift origin: sua nuvem privada'
date: '2013-10-15T18:55:00.002-03:00'
author: Ricardo Martinelli Oliveira
tags:
- openshift
- paas
- origin
- community
modified_time: '2013-10-15T18:55:12.860-03:00'
thumbnail: http://3.bp.blogspot.com/-VxLxvwVEgqM/Ul24lpLcbOI/AAAAAAAABpQ/-KyX54-POBo/s72-c/download.png
blogger_id: tag:blogger.com,1999:blog-3438555562642680163.post-6692983853512798013
blogger_orig_url: http://aprendendo-cloud-computing.blogspot.com/2013/10/openshift-origin-sua-nuvem-privada.html
comments: true
---

Como todos já sabem, o OpenShift têm evoluído cada vez mais e mais pessoas estão utilizando o serviço para desenvolvimento de aplicações na nuvem. Inclusive há histórias bem interessantes sobre aplicações e startups sobre OpenShift. Caso queiram conhecer alguns cases de sucesso, vocês podem &nbsp;algumas delas através da página:<br /><div><br /><a href="https://www.openshift.com/developer-spotlight">https://www.openshift.com/developer-spotlight</a></div><div><br /></div><div>Mas para algumas startups, o maior caso de sucesso não é a aplicação hospedada no OpenShift e sim a infraestrutura da nuvem! Sim amigos, há startups que oferecem o serviço na nuvem assim como a Red Hat e a Google: trata-se de uma startup brasileira chamada getup (<a href="http://www.getupcloud.com/">http://www.getupcloud.com</a>). A startup oferece um serviço de hospedagem e PaaS exatamente como o OpenShift faz, porém com algumas vantagens para os desenvolvedores brazucas, como:</div><div><ul><li>Infraestrutura totalmente feita no Brasil (seu ambiente foi construído no ambiente AWS assim como o OpenShift Online mas usando o datacenter de São Paulo)</li><li>O suporte é em Português (assim como no OpenShift Online, porém o plano pago do OpenShift ainda será lançado)</li><li>Acompanha todas as atualizações do OpenShift</li></ul><div>Portanto, como devem ter percebido, o OpenShift é um projeto Open Source assim como todos os outros projetos que a Red Hat mantém. Por isso, é possível ter acesso ao código dele bem como é possível configurar uma nuvem privada dentro de sua própria empresa/startup/casa.</div><div>Tentarei nas próximas seções explicar as formas de como ter um ambiente OpenShift rodando em seu ambiente particular. <i>Nota: </i>Caso queira conhecer um pouco sobre a arquitetura interna do Openshift, basta ler essa página:&nbsp;<a href="http://aprendendo-cloud-computing.blogspot.com.br/p/aqruitetura-do-openshift.html">http://aprendendo-cloud-computing.blogspot.com.br/p/aqruitetura-do-openshift.html</a></div><h3>Antes, um aviso...</h3><div>Após a Red Hat anunciar a sua versão On-Premise (ou seja, OpenShift rodando em redes privadas corporativas), houve a necessidade de separar as diferentes áreas para dar foco total aos engenheiros na inovação e produtização do OpenShift. Temos o <i>OpenShift Online</i>&nbsp;que é o serviço de hospedagem da comunidade acessível pelo endereço <a href="http://openshift.com/">http://openshift.com</a>&nbsp;e também com uma conta paga você terá acesso a mais recursos computacionais, o <i>OpenShift Origin</i>&nbsp;é o projeto Open Source da Red Hat e por fim temos o produto da Red Hat para empresas que é o <i>OpenShift Enterprise</i>. Abaixo você pode observar melhor a relação entre esses projetos:</div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://www.openshift.com/sites/default/files/triangle_0.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="375" src="https://www.openshift.com/sites/default/files/triangle_0.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Projetos OpenShift</td></tr></tbody></table><h3>Configurando o ambiente OpenShift</h3><div>Esse é o jeito mais complexo de se construir &nbsp;um ambiente pois você irá configurar cada componente em questão e portanto leva-se muito tempo para isso. No entanto, é a melhor forma de estudar a arquitetura do OpenShift e isso será fundamental para caso você tenha problemas com o ambiente que está configurando.<br />Para isso, siga o Deployment Guide na página do OpenShift:&nbsp;<a href="http://openshift.github.io/documentation/oo_deployment_guide_comprehensive.html">http://openshift.github.io/documentation/oo_deployment_guide_comprehensive.html</a></div><h3>Automatizando a configuração com Puppet</h3><div>Claro que é muito bacana seguir os passos para fazer o deployment para compreender como cada componente se encaixa (acredito, eu acho isso melhor que quebra-cabeças), mas em um ambiente como o próprio OpenShift Online (o serviço PaaS público da Red Hat), torna-se inviável provisionar servidores para comportar a carga sem ao menos ter uma forma de automatizar a instalação/configuração. Pensando nisso, a equipe da comunidade criou alguns scripts em puppet para provisionar de forma automatizada. Inclusive, é possível provisionar um ambiente completo OpenShift em um servidor (o famoso all-in-one) ou configurar alguns componentes somente no servidor. O site do OpenShift tem um Puppet Deployment Guide para isso e caso queira é só seguir:&nbsp;<a href="http://openshift.github.io/documentation/oo_deployment_guide_puppet.html">http://openshift.github.io/documentation/oo_deployment_guide_puppet.html</a><br />Abaixo uma classe Puppet para provisionamento do OpenShift all-in-one:<br /><blockquote class="tr_bq"><pre style="background-color: #eeeeee; border-width: 0px; box-sizing: border-box; direction: ltr; font-family: source_code_pro, monospace, serif; font-size: 16px; line-height: 1.4; overflow-x: auto; padding: 0.8em 0.8em 0.6em; white-space: pre-wrap; word-wrap: break-word;">  class { 'openshift_origin' :<br />      #The DNS resolvable hostname of this host<br />      node_fqdn                  =&gt; "broker.example.com",<br /><br />      #The domain under which application should be created. Eg: &lt;app&gt;-&lt;namespace&gt;.example.com<br />      cloud_domain               =&gt; 'example.com',<br /><br />      #Upstream DNS server.<br />      dns_servers                =&gt; ['8.8.8.8'],<br /><br />      enable_network_services    =&gt; true,<br />      configure_firewall         =&gt; true,<br />      configure_ntp              =&gt; true,<br /><br />      #Configure the required services<br />      configure_activemq         =&gt; true,<br />      configure_mongodb          =&gt; true,<br />      configure_named            =&gt; true,<br />      configure_avahi            =&gt; false,<br />      configure_broker           =&gt; true,<br />      configure_node             =&gt; true,<br /><br />      #Enable development mode for more verbose logs<br />      development_mode           =&gt; true,<br /><br />      #Update the nameserver on this host to point at Bind server<br />      update_network_dns_servers =&gt; true,<br /><br />      #Use the nsupdate broker plugin to register application<br />      broker_dns_plugin          =&gt; 'nsupdate',<br /><br />      #If installing from a local build, specify the path for Origin RPMs<br />      #install_repo               =&gt; 'file:///root/origin-rpms',<br /><br />      #If using BIND, let the broker know what TSIG key to use<br />      named_tsig_priv_key         =&gt; '&lt;tsig key&gt;',<br /><br />      #If using an external ethernet device other than eth0<br />      #eth_device                 =&gt; '&lt;ethernet device name, eg: enp0s5&gt;',<br /><br />      #If using with GDM, or have users with UID 500 or greater, add to this list<br />      #os_unmanaged_users         =&gt; ['gdm'],<br /><br />      #If using the stable version instead of the nightly<br />      #install_repo               =&gt; 'release',<br />      #dependencies_repo          =&gt; 'release',<br />    }</pre></blockquote></div><h3>Download das Máquinas Virtuais (o famoso Lazy Mode)</h3></div><div>Se vocês forem como eu, então procurarão pela maneira mais fácil. =D Trata-se simplemente se um repositório onde há diversos arquivos de Máquinas Virtuais já instalados e configurados com OpenShift e é só importar para o Hypervisor de sua preferência. Assim, você terá o mínimo de esforço necessário para rodar o OpenShift localmente em sua máquina/servidor.<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-VxLxvwVEgqM/Ul24lpLcbOI/AAAAAAAABpQ/-KyX54-POBo/s1600/download.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="353" src="http://3.bp.blogspot.com/-VxLxvwVEgqM/Ul24lpLcbOI/AAAAAAAABpQ/-KyX54-POBo/s400/download.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Tela de início da Máquina Virtual OpenShift</td></tr></tbody></table>Você pode encontrar mais informações no Virtual Machine Deployment Guide:&nbsp;<a href="http://openshift.github.io/documentation/oo_deployment_guide_vm.html">http://openshift.github.io/documentation/oo_deployment_guide_vm.html</a><br />Bom, por ora é isso. Quem tiver dúvidas ou teve problemas com alguns dos métodos para provisionar seu próprio ambiente OpenShift, podem postar um comentário. Até a próxima.</div>