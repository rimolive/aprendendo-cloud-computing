---
layout: post
title: Ferramentas de DevOps em Openshift
date: '2013-04-18T19:44:00.000-03:00'
author: Ricardo Martinelli Oliveira
tags:
- openshift
- metrics
- ruby
- redmine
- devops
- jenkins
- sonar
- java
modified_time: '2013-04-18T19:44:00.121-03:00'
thumbnail: http://3.bp.blogspot.com/--470Zjct0j4/UUUjTzriCEI/AAAAAAAABYk/oIK2JasMGlc/s72-c/Screenshot+from+2013-03-16+22:14:57.png
blogger_id: tag:blogger.com,1999:blog-3438555562642680163.post-8236084550348668923
blogger_orig_url: http://aprendendo-cloud-computing.blogspot.com/2013/04/ferramentas-de-devops-em-openshift.html
comments: true
---

<h3>Introdução</h3><div>Além de todos os benefícios que eu sempre venho dizendo e escrevendo neste blog do Cloud Computing, quero aqui mostrar um cenário do qual o desenvolvimento de aplicações pode se tornar cada vez mais prático utilizando &nbsp;ferramentas que podem auxiliar o que chamados de DevOps (Development Operations). DevOps trata de unir o desenvolvimento, Quality Assurance (QA) e Infraestrutura (Technology Operations) de forma a estressar a comunicação, colaboração e integração entre esses times e com isso padronizando os ambientes de desenvolvimento e facilitando o gerenciamento de releases da aplicação.</div><div><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://upload.wikimedia.org/wikipedia/commons/b/b5/Devops.svg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="304" src="http://upload.wikimedia.org/wikipedia/commons/b/b5/Devops.svg" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Um gráfico que exemplifica o papel de DevOps em um processo de software &nbsp;(Fonte: wikipedia)</td></tr></tbody></table><div>Cloud Computing, além de provisionar um ambiente operacional para suas aplicações em questão de segundos, aproxima o desenvolvedor de um ambiente de produção (ou muito próximo dele) e assim o desenvolvedor consegue ter uma visibilidade muito maior de como sua aplicação irá se comportar em um ambiente desses. Entretanto, não podemos simplesmente botar todo o foco nisso sem esquecer em métricas de qualidade do código nem em integração contínua.</div><div>Nesse post eu irei mostrar que em Openshift você pode fazer tudo isso e ainda por cima disponibilizar publicamente e de uma forma bem simples.</div><div><br /></div><h3>Gerenciamento de projetos com Redmine</h3><div>Redmine é uma ferramenta escrita em Ruby que permite a criação e gerenciamento de issues de projetos, além de servir como um repositório de documentos e arquivos relevantes ao projeto e também pode ser criada uma base de conhecimento em formato wiki. O que eu achei a maior sacada do Redmine é que ele traz uma visualização das issues em um gráfico Gantt(o gráfico preferido dos gerentes de projetos), podendo assim ver a situação do projeto de forma online.</div><div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/--470Zjct0j4/UUUjTzriCEI/AAAAAAAABYk/oIK2JasMGlc/s1600/Screenshot+from+2013-03-16+22:14:57.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="242" src="http://3.bp.blogspot.com/--470Zjct0j4/UUUjTzriCEI/AAAAAAAABYk/oIK2JasMGlc/s400/Screenshot+from+2013-03-16+22:14:57.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Gráfico Gantt gerado pelo Redmine</td></tr></tbody></table>Atualmente, eu venho utilizando o Redmine em um projeto pessoal meu e por isso eu venho estudando essa ferramenta para pode me organizar nas tarefas. Com ele, eu consigo ver exatamente o que eu quero que minha aplicação tenha e assim poder eu mesmo organizar as tarefas e ir registrando meu progresso.<br />Aliando a facilidade de provisionar um sistema como o Redmine com a infraestrutura de nuvem pública, é possível criar um ambiente para os gestores de projetos de uma startup a gerenciarem e monitorarem os projetos e seus detalhes de forma que não precisem manter essa infraestrutura (nem pagarem por isso).<br /><br /></div><h3>Integração Contínua com Jenkins</h3><div>Quem já ouviu falar de Integração contínua, com certeza já ouviu falar do Hudson/Jenkins. Essa ferramenta pode ser uma mão na roda para projetos com muitos desenvolvedores, onde ele auxilia a equipe a testar todo o projeto a partir do código que já se encontra em um repositório de código, desde compilando o código até executando testes unitários e de integração. Tarefas mais completas (e por consequëncia, complexas) chegam até a publicar os artefatos em repositórios como o Nexus.</div><div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-KoOzOB1dWJE/UUUl3FFIfhI/AAAAAAAABYs/8_vVd2yWGpE/s1600/Screenshot+from+2013-03-16+23:09:05.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="250" src="http://4.bp.blogspot.com/-KoOzOB1dWJE/UUUl3FFIfhI/AAAAAAAABYs/8_vVd2yWGpE/s400/Screenshot+from+2013-03-16+23:09:05.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Tela do jenkins e os detalhes de uma tarefa automatizada</td></tr></tbody></table>Dentre todas as ferramentas que irei mencionar neste post, esse com certeza é o mais integrado ao ambiente OpenShift pois já nasceu com essa integração com o Jenkins e portanto é o mais fácil de se utilizar dentro do OpenShift.<br /><br /></div><h3>Qualidade de código com Sonar</h3><div>Para aumentar a qualidade de código de seus projetos, há a ferramenta Sonar para análise de qualidade de código. Obviamente, isso é feito de forma estática e baseado em regras de desenvolvimento. Para cobrir a qualidade do código em execução deve-se utilizar ferramentas de teste unitários, de integração, funcionais, etc. Isso tudo pode ser combinado no Jenkins em uma tarefa de integração contínua, com mencinado na seção anterior.</div><div>O Sonar já vem com algumas regras (algumas delas criadas pela própria Sun, e que Deus a tenha), o que permite que você não comece a criar as regras do zero e poupando tempo na definição das mesmas.</div><div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-E41TFhh33Sk/UUUmCQxTJTI/AAAAAAAABY0/7GiDNvx3QLc/s1600/Screenshot+from+2013-03-16+23:09:50.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="250" src="http://2.bp.blogspot.com/-E41TFhh33Sk/UUUmCQxTJTI/AAAAAAAABY0/7GiDNvx3QLc/s400/Screenshot+from+2013-03-16+23:09:50.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Tela do sonar com um exemplo de análise de um projeto</td></tr></tbody></table>Um detalhe importante para utilizar o sonar em seus projetos OpenShift: o projeto é todo estruturado no Maven e portanto você pode utilizar o plugin do Sonar para assim poder executar a tarefa:<br /><blockquote class="tr_bq">$ mvn sonar:sonar</blockquote></div><div>Porém o plugin exige que se utilize uma URL com uma porta específica para acesso ao repositório do Sonar e registrar todas as informações relevantes à ele. Como no OpenShift, as regras de segurança são muito restritar, é necessário que você habilite o port forward em sua aplicação sonar com o seguinte comando:<br /><blockquote class="tr_bq">$ rhc port-forward -a &lt;aplicacao_sonar&gt;</blockquote><br /></div><h3>Monitoramento de aplicações com Openshift Metrics</h3><div>OpenShift fornece um cartridge específico para o monitoramento da saúde de sua aplicação. Ela é muito simples, mas já te dá informações cruciais da sua aplicação(como consumo de memória e CPU). Para adicionar em sua aplicação o cartridge para monitorar sua aplicação, basta executar:</div><blockquote class="tr_bq">$ rhc cartridge add metrics-0.1 -a &lt;nome-aplicacao&gt;</blockquote><div>Após a conclusão do comando, você pode acessar o Metrics através da URL:</div><blockquote class="tr_bq">http://&lt;aplicacao&gt;-&lt;dominio&gt;.rhcloud.com/metrics/</blockquote><div><br /></div><div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-qLAEXn00BYQ/UUUmGb5NNfI/AAAAAAAABY8/N2vkgOznF-c/s1600/Screenshot+from+2013-03-16+23:10:02.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="250" src="http://3.bp.blogspot.com/-qLAEXn00BYQ/UUUmGb5NNfI/AAAAAAAABY8/N2vkgOznF-c/s400/Screenshot+from+2013-03-16+23:10:02.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">OpenShift metrics</td></tr></tbody></table>Por ser uma ferramenta ainda experimental, o código ainda não está disponível. Acredito que em breve teremos mais funcionalidade e também a abertura do código.</div><div><br /></div><h3>Conclusão</h3><div>As ferramentas apresentadas neste post podem ser instaladas de forma muito simples: seja pela ferramenta rhc ou pelo próprio console administrativo do Openshift ou até utilizando dos quickstarts da comunidade que, em sua maioria, se encontram no <a href="http://www.github.com/openshift">github</a> do Openshift. Apesar da facilidade da criação desse ambiente, as contas gratuitas do Openshift permitem até 3 aplicações criadas e portanto você pode consumir toda a sua cota, mas nada te impede de criar várias contas e gerenciar essas aplicações em uma conta específica.</div>